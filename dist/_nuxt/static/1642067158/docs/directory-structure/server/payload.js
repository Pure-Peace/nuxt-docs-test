__NUXT_JSONP__("/docs/directory-structure/server", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as){return {data:[{page:{key:"content:3.docs:2.directory-structure:12.server.md",generatedAt:new Date(1642067217529),mtime:new Date(1642067217521),slug:Q,title:Q,position:"000300020012",to:"\u002Fdocs\u002Fdirectory-structure\u002Fserver",draft:D,page:E,language:"en",icon:"IconDirectory",head:{title:R},empty:D,description:S,excerpt:T,body:{raw:"---\nicon: IconDirectory\ntitle: server\nhead.title: Server directory\n---\n\n# Server directory\n\nThe server directory is used to create any backend logic for your Nuxt application. It supports HMR and powerful features.\n\nThe `server\u002F` directory contains API endpoints and server middleware for your project.\n\n## API Routes\n\nNuxt will automatically read in any files in the `~\u002Fserver\u002Fapi` directory to create API endpoints.\n\nEach file should export a default function that handles API requests. It can return a promise or JSON data directly (or use `res.end()`).\n\n### Examples\n\n#### Hello world\n\n```js [server\u002Fapi\u002Fhello.ts]\nexport default (req, res) =\u003E 'Hello World'\n```\n\nSee the result on \u003Chttp:\u002F\u002Flocalhost:3000\u002Fapi\u002Fhello\u003E.\n\n#### Async function\n\n```js [server\u002Fapi\u002Fasync.ts]\nexport default async (req, res) =\u003E {\n  await someAsyncFunction()\n\n  return {\n    someData: true\n  }\n}\n```\n\n**Example:** Using Node.js style\n\n```ts [server\u002Fapi\u002Fnode.ts]\nimport type { IncomingMessage, ServerResponse } from 'http'\n\nexport default async (req: IncomingMessage, res: ServerResponse) =\u003E {\n  res.statusCode = 200\n  res.end('Works!')\n}\n```\n\n## Server Middleware\n\nNuxt will automatically read in any files in the `~\u002Fserver\u002Fmiddleware` to create server middleware for your project.\n\nThese files will be run on every request, unlike [API routes](#api-routes) that are mapped to their own routes. This is typically so you can add a common header to all responses, log responses or modify the incoming request object for later use in the request chain.\n\nEach file should export a default function that will handle a request.\n\n```js\nexport default async (req, res) =\u003E {\n  req.someValue = true\n}\n```\n\nThere is nothing different about the `req`\u002F`res` objects, so typing them is straightforward.\n\n```ts\nimport type { IncomingMessage, ServerResponse } from 'http'\n\nexport default async (req: IncomingMessage, res: ServerResponse) =\u003E {\n  req.someValue = true\n}\n```\n\nMore information about custom middleware can be found in the documentation for [nuxt.config.js](\u002Fdocs\u002Fdirectory-structure\u002Fnuxt.config#servermiddleware)\n",ast:{type:"root",children:[{type:b,tag:"prose-h1",props:{class:"d-heading-title",id:"server-directory"},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:j,props:{class:"d-heading-description"},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"The "},{type:b,tag:q,props:{},children:[{type:a,value:"server\u002F"}]},{type:a,value:" directory contains API endpoints and server middleware for your project."}]},{type:a,value:g},{type:b,tag:U,props:{id:V},children:[{type:b,tag:k,props:{href:W},children:[{type:a,value:X}]}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:Y},{type:b,tag:q,props:{},children:[{type:a,value:"~\u002Fserver\u002Fapi"}]},{type:a,value:" directory to create API endpoints."}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"Each file should export a default function that handles API requests. It can return a promise or JSON data directly (or use "},{type:b,tag:q,props:{},children:[{type:a,value:"res.end()"}]},{type:a,value:")."}]},{type:a,value:g},{type:b,tag:"prose-h3",props:{id:Z},children:[{type:b,tag:k,props:{href:"#examples"},children:[{type:a,value:_}]}]},{type:a,value:g},{type:b,tag:$,props:{id:"hello-world"},children:[{type:b,tag:k,props:{href:"#hello-world"},children:[{type:a,value:"Hello world"}]}]},{type:a,value:g},{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[J]},children:[{type:a,value:"server\u002Fapi\u002Fhello.ts"}]},{type:b,tag:u,props:{className:[v,K]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,h,r]},children:[{type:a,value:x}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,r]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:s},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:z}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,M,i]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'Hello World'"}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"See the result on "},{type:b,tag:k,props:{href:aa,rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:a,value:aa}]},{type:a,value:B}]},{type:a,value:g},{type:b,tag:$,props:{id:"async-function"},children:[{type:b,tag:k,props:{href:"#async-function"},children:[{type:a,value:"Async function"}]}]},{type:a,value:g},{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[J]},children:[{type:a,value:"server\u002Fapi\u002Fasync.ts"}]},{type:b,tag:u,props:{className:[v,K]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,h,r]},children:[{type:a,value:x}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,r]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:s},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:z}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,M,i]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,h,ac]},children:[{type:a,value:"await"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,ad]},children:[{type:a,value:"someAsyncFunction"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:"\n\n  "},{type:b,tag:c,props:{className:[d,h,ac]},children:[{type:a,value:"return"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:"\n    someData"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:C}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:O}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:b,tag:"prose-strong",props:{},children:[{type:a,value:"Example:"}]},{type:a,value:" Using Node.js style"}]},{type:a,value:g},{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[J]},children:[{type:a,value:"server\u002Fapi\u002Fnode.ts"}]},{type:b,tag:u,props:{className:[v,ae]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:af}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ag}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ai}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:aj}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:x}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:C}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:C}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"statusCode "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:P}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,"number"]},children:[{type:a,value:"200"}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,ad]},children:[{type:a,value:"end"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'Works!'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:U,props:{id:an},children:[{type:b,tag:k,props:{href:"#server-middleware"},children:[{type:a,value:ao}]}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:Y},{type:b,tag:q,props:{},children:[{type:a,value:"~\u002Fserver\u002Fmiddleware"}]},{type:a,value:" to create server middleware for your project."}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"These files will be run on every request, unlike "},{type:b,tag:k,props:{href:W},children:[{type:a,value:"API routes"}]},{type:a,value:" that are mapped to their own routes. This is typically so you can add a common header to all responses, log responses or modify the incoming request object for later use in the request chain."}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"Each file should export a default function that will handle a request."}]},{type:a,value:g},{type:b,tag:t,props:{},children:[{type:b,tag:u,props:{className:[v,K]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,h,r]},children:[{type:a,value:x}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,r]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:s},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:z}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,M,i]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,"property-access"]},children:[{type:a,value:"someValue"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:P}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:O}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"There is nothing different about the "},{type:b,tag:q,props:{},children:[{type:a,value:s}]},{type:a,value:"\u002F"},{type:b,tag:q,props:{},children:[{type:a,value:"res"}]},{type:a,value:" objects, so typing them is straightforward."}]},{type:a,value:g},{type:b,tag:t,props:{},children:[{type:b,tag:u,props:{className:[v,ae]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:af}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ag}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ai}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:aj}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:x}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:l}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:C}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:m}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:C}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"someValue "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:P}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:O}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:p}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"More information about custom middleware can be found in the documentation for "},{type:b,tag:k,props:{href:"\u002Fdocs\u002Fdirectory-structure\u002Fnuxt.config#servermiddleware"},children:[{type:a,value:"nuxt.config.js"}]}]}]},toc:{title:aq,searchDepth:I,depth:I,links:[{id:V,depth:I,text:X,children:[{id:Z,depth:3,text:_}]},{id:an,depth:I,text:ao}]}},template:ar},templateOptions:{header:E,footer:E,aside:E,asideClass:aq,fluid:D,banner:D},_img:{}}],fetch:{"0":{headerLinks:[{title:"Getting Started",to:"\u002Fgetting-started\u002Fintroduction"},{title:"Concepts",to:"\u002Fconcepts\u002Fintroduction"},{title:ar,to:"\u002Fdocs\u002Fusage\u002Fdata-fetching"},{title:"Community",to:"\u002Fcommunity\u002Fgetting-help"}]},"1":{repoUrl:"https:\u002F\u002Fgithub.com\u002Fnuxt\u002Fframework",prev:{slug:as,to:"\u002Fdocs\u002Fdirectory-structure\u002Fpublic",title:as},next:{slug:"gitignore",to:"\u002Fdocs\u002Fdirectory-structure\u002Fgitignore",title:".gitignore"}},_lazyComponents:new Set(["ProseParagraph","ButtonLink","HomeHero","SectionContentItem","HomeFeatures","IconNuxtNitro","Headline","ProseStrong","ProseA","ProseCodeInline","NuxtContainer","IconNuxtBridge","ProseH3","ProseLi","ProseUl","List","ProseH1","ProseH2","Alert","ProseTh","ProseTr","ProseThead","ProseTd","ProseTbody","ProseTable","ProseEm","ProseCode","CodeGroup","ProseOl","ProseBlockquote","ProseH4"])},mutations:T}}("text","element","span","token"," ","punctuation","\n","keyword","operator","prose-paragraph","prose-a","(",",",")","{","}","prose-code-inline","module","req","prose-code","pre","line-numbers","code","export","default"," res","=\u003E",".",":",false,true,"string","async"," IncomingMessage",2,"filename","language-js","parameter","arrow","boolean","true","=","server","Server directory","The server directory is used to create any backend logic for your Nuxt application. It supports HMR and powerful features.",void 0,"prose-h2","api-routes","#api-routes","API Routes","Nuxt will automatically read in any files in the ","examples","Examples","prose-h4","http:\u002F\u002Flocalhost:3000\u002Fapi\u002Fhello","\n  ","control-flow","function","language-ts","import","type"," ServerResponse ","from","'http'","\n\n"," ServerResponse","\n  res","server-middleware","Server Middleware","\n  req","","Docs","public")));